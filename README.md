# SimilarPubmed
## T+1 update
### Input Format
```
output\t<Output File Path>
callback\t<Callback URL>/<RabbitMq QueueName>
<PMID1>\t<TITLE>\t<ABSTRACT>
<PMID2>\t<TITLE>\t<ABSTRACT>
<PMID3>\t<TITLE>\t<ABSTRACT>
...
```
### Example
```
output  /path/to/output
callback  http://call.back.url/job/name
12106120	Is the capacity for optic nerve regeneration related to continued retinal ganglion cell production in the frog?	"<AbstractText Label=""null"" NlmCategory=""UNLABELLED"">In the central nervous system of fish and frogs, some, but not all, axons can regenerate. Retinal ganglion cells are among those that can. The retinae of fish and frogs produce new retinal neurons, including ganglion cells, for months or years after hatching. We have evaluated the hypothesis that retinal axonal regeneration is obligatorily linked to continued production of new ganglion cells. We used bromodeoxyuridine immunocytochemistry to assess retinal neurogenesis in juvenile, yearling, and 10 year old Xenopus laevis. Retinal ganglion cell genesis was vigorous in the marginal retina of the juveniles, but in the yearlings and the 10 year olds, no new ganglion cells were produced there. Cellular proliferation in the central retina was evident at all three ages, but none of the cells produced centrally were in the ganglion cell layer. Regeneration was examined in vivo by cutting one optic nerve and then, weeks later, injecting the eye with tritiated proline. Autoradiographs of brain sections showed that the optic nerves of all three ages regenerated. Regeneration in vitro was assessed using retinal explants from frogs of all three ages. In all cases, the cultures produced neurites, with some age-specific differences in the patterns of outgrowth. We conclude that retinal axonal regeneration is not linked obligatorily to maintained neurogenesis. </AbstractText>"
12106142	The Organization of Connections between Areas V5 and V1 in Macaque Monkey Visual Cortex.	"<AbstractText Label=""null"" NlmCategory=""UNLABELLED"">Area V5 or MT of primate extrastriate visual cortex is specialized for involvement in the analysis of motion and receives input from two layers, 4B and 6, of the striate cortex or V1. Injections of horseradish peroxidase - wheatgerm agglutinin into V5 reveal a patchy distribution of labelled cells and axonal terminals in layer 4B, suggesting the presence of a segregated and functionally specialized subsystem within the layer. The patches are similar in size and frequency to the cytochrome oxidase blobs of layers 2 and 3, but bear little systematic relationship to them. V5-efferent cells in layer 6, however, tend to avoid the cores of the blobs. The back projection from V5 is continuously distributed in layers 6 and 1, though it is absent inside representations of the central 10 degrees in the latter; it is also diffusely distributed between the patches in layer 4B and over a territory wider than that occupied by labelled cells. It is thus inferred that the back projection probably influences (a) V5-efferent cells other than those projecting to the injected site in V5, and (b) cells projecting to locations other than V5. There are no major changes in the cortical frequency of V5-efferent cells with eccentricity in the visual field representation. The V5-efferent cells of layer 6 are tenfold less frequent than those of layer 4B and as a population may therefore be involved with only a limited sector of directions of movement. Furthermore, their topographic distribution does not always coincide exactly with that of the layer 4B population, as if a site in V5 receives information about slightly non-corresponding regions of the visual field from the two layers. </AbstractText>"
12106143	The Organization of Connections between Areas V5 and V2 in Macaque Monkey Visual Cortex.	"<AbstractText Label=""null"" NlmCategory=""UNLABELLED"">Area V2 of the cerebral cortex of higher primates has a complex cytochrome oxidase architecture whose most characteristic element is a set of stripes running orthogonal to its long axis. These stripes can be related to the segregation between the various pathways in which V2 participates. In the macaque monkey the more metabolically active stripes are alternately thick and thin and only one set, the thick stripes, is found to possess clusters of labelled cells following injections of horseradish peroxidase - wheatgerm agglutinin into area V5. Some of these clusters, but not all, coincide with substructures inside the thick stripes. V2 of the owl monkey has a similar organization except that the diversification into thick and thin stripes is less prominent, both in terms of their appearance and in that more than every alternate stripe is connected to area MT, the likely homologue of V5. The return projection from V5 to V2 is more widespread than the origin of the forward projection. It extends not only between the clusters of V5-efferent cells within the thick stripes but also across the intervening thin stripes and less active interstripes. Because the latter subserve functions different from those of the thick stripes it would seem that their receipt of a back projection from an area to which they do not project, V5, may be relevant to the process of intergration of signals relating to different attributes of vision. </AbstractText>"
12106151	Non-competitive antagonism of N-methyl-d-aspartate by displacement of an endogenous glycine-like substance.	"<AbstractText Label=""null"" NlmCategory=""UNLABELLED"">N-methyl-D-aspartate (NMDA; 40 microM) induced depolarizations of cortical wedges that were reduced by 30 - 60% in the presence of D-2-amino-5-phosphonovalerate (D-AP5; 5 microM), ketamine (5 microM), dextrorphan (5 microM), magnesium (500 microM), kynurenate (200 microM), and 1-hydroxy-3-aminopyrrolidone-2 (HA-966; 200 microM). Superfusion with glycine (1 microM - 1 mM) did not enhance the action of NMDA in control medium and in media containing D-AP5, ketamine, dextrorphan, or magnesium. In the presence of kynurenate and HA-966, however, NMDA-induced depolarizations were enhanced in a dose-dependent manner by glycine (10 microM - 3.16 mM). NMDA antagonism produced by HA-966 appeared to be more completely reversed than that produced by kynurenate. This action of glycine was mimicked by D-serine but not by GABA or L-serine, and was resistant to strychnine (10 - 50 microM). Reduction of responses to quisqualate by kynurenate was not reversed by glycine. In these cortical wedges, spontaneous synaptic activity was observed in nominally magnesium-free medium and this epileptiform activity could be blocked by the above NMDA antagonists. Glycine and D-serine reversed only the effect of kynurenate and HA-966 on such synaptic activity. These results suggest there is an endogenous glycine-like compound acting on NMDA receptor-ionophore complexes and that displacement of this compound by HA-966 or kynurenate produces antagonism of NMDA. </AbstractText>"
12106171	Absence of Wallerian Degeneration does not Hinder Regeneration in Peripheral Nerve.	"<AbstractText Label=""null"" NlmCategory=""UNLABELLED"">Wallerian degeneration of the distal stump of a severed peripheral nerve involves invasion by myelomonocytic cells, whose presence is necessary for destruction of myelin and for initiating mitosis in Schwann cells (Beuche and Friede, 1984). Degeneration of the distal ends of the axons themselves is assumed to occur by autolytic mechanisms. We describe a strain of mice (C57BL/6/Ola) in which leucocyte invasion is slow and sparse. In these mice, confirming Beuche and Friede, myelin removal is extremely slow. A new finding is that axon degeneration is also very slow. This is a consequence of lack of recruitment of myelomonocytic cells for if such recruitment is prevented in other mouse strains by a monoclonal antibody against the complement type 3 receptor (Rosen and Gordon, 1987) axon degeneration is again slowed. We have also, surprisingly, found that nerve regeneration in the C57BL/6/Ola mice is not impeded by the presence of largely intact axons in the distal stump and absence of recruited cells, myelin debris and the absence of Schwann cell mitosis. </AbstractText>"
14542171	Enhancement of oxygen transfer rates in fermentation using oxygen-vectors.	"<AbstractText Label=""null"" NlmCategory=""UNLABELLED"">Oxygen transfer is one of the bottlenecks in conventional fermentation technology and it has so far been almost totally overlooked with regards to high cell densities and immobilized cells. This review presents some new concepts to improve oxygen supply in aerobic fermentations, especially the use of oxygen-vectors. The oxygen-vectors generally used are liquids which are insoluble in the fermentation media. Their utilization in an emulsified form can significantly increase the oxygen transfer coefficient between gas and aqueous phases. It seems that the vector acts as an active intermediate in the oxygen transport from gas bubbles to aqueous phase, but the mechanisms involved in this unconventional technique of aeration are not yet known. </AbstractText>"
14542172	Hydrophobic interaction chromatography.	"<AbstractText Label=""null"" NlmCategory=""UNLABELLED"">Hydrophobic interaction chromatography (HIC) is emerging as a useful technique for the separation of biological compounds. Advances in the past two years in HIC applications, stationary phases, eluents, and theory are reviewed. Recent applications of HIC processes include analytical and semi-preparative separations of a variety of proteins, such as isolectins, hemoglobins, calmodulin, and cardiotoxins. Additionally, HIC is being employed as a tool to investigate protein properties and mechanisms. Advances in HIC stationary phases include development of non-porous, microparticulate supports as well as supports with pore sizes up to 1000 Angstroms. Studies of HIC eluents have further shown the effects of mobile phase pH, water-structuring characterization, and surface tension increments on retention. Various retention mechanisms which have been presented are reviewed; and a correlation relating resolution to column and solute parameters is presented. Protein conformational effects at specific sites have been shown to have a significant impact on retention and specific examples illustrating such effects are discussed. </AbstractText>"
14542173	Molecular genetics of Rhizobium Meliloti symbiotic nitrogen fixation.	"<AbstractText Label=""null"" NlmCategory=""UNLABELLED"">The application of recombinant DNA techniques to the study of symbiotic nitrogen fixation has yielded a growing list of Rhizobium meliloti genes involved in the processes of nodulation, infection thread formation and nitrogenase activity in nodules on the roots of the host plant, Medicago sativa (alfalfa). Interaction with the plant is initiated by genes encoding sensing and motility systems by which the bacteria recognizes and approaches the root. Signal molecules, such as flavonoids, mediate a complex interplay of bacterial and plant nodulation genes leading to entry of the bacteria through a root hair. As the nodule develops, the bacteria proceed inward towards the cortex within infection threads, the formation of which depends on bacterial genes involved in polysaccharide synthesis. Within the cortex, the bacteria enter host cells and differentiate into forms known as bacteroids. Genes which encode and regulate nitrogenase enzyme are expressed in the mature nodule, together with other genes required for import and metabolism of carbon and energy sources offered by the plant. </AbstractText>"
14542174	Use of Xenopus oocytes to study the expression of cloned genes and translation of mRNA.	"<AbstractText Label=""null"" NlmCategory=""UNLABELLED"">One of the most active areas of research in the field of molecular biology is the examination of the mechanisms associated with the regulation of gene expression. Our understanding of the events in eukaryotic transcription has been aided by the ability to test the expression of various genomic DNA constructs after their microinjection into the germinal vesicle of Xenopus oocytes. This in vivo transcription system has permitted the analysis of the involvement of cis-acting DNA sequences and the examination of the effect of co-injected trans-acting factors on gene expression. Furthermore, the Xenopus oocyte has been employed widely as an in vivo translation system. Not only is the Xenopus oocyte system a sensitive assay for the translation of rare mRNAs but it also has the ability to post-translationally modify and compartmentalize numerous types of proteins. Finally, the Xenopus oocyte has proven useful in the procedures associated with the cloning and screening of cDNAs. </AbstractText>"
```
### Output Format
```
<SOURCE PMID_1>\t<RELATED PMID_1>\t<SCORE_1_1>
<SOURCE PMID_1>\t<RELATED PMID_2>\t<SCORE_1_2>
<SOURCE PMID_1>\t<RELATED PMID_3>\t<SCORE_1_3>
<SOURCE PMID_2>\t<RELATED PMID_1>\t<SCORE_2_1>
<SOURCE PMID_2>\t<RELATED PMID_2>\t<SCORE_2_2>
<SOURCE PMID_3>\t<RELATED PMID_1>\t<SCORE_3_1>
...
```
### Example
```
915424  915424  39.762527
915424  11845333        12.417924
915424  26013017        12.304911
915424  24844304        11.381235
915424  19682601        11.377186
915424  26151557        11.024003
915424  19620393        10.757117
915424  22200592        10.744744
915424  16247693        10.645599
915424  11108591        10.618491
26376674        26376674        34.353954
26376674        12184836        12.349423
26376674        2503772 11.812834
26376674        11248166        11.290904
26376674        24608555        10.911844
26376674        18034616        10.334626
26376674        26135292        10.132594
26376674        26516559        9.875148
26376674        23807067        9.627439
26376674        26429987        9.544746
26376674        10557989        9.414326
26376674        24131810        9.387953
26376674        24649834        9.330328
```

## Installation
### Spark
* Download spark-2.2.0-bin-hadoop2.7.tgz
* untar
```
tar -vzxf spark-2.2.0-bin-hadoop2.7.tgz
```
* move to /application
```
mv ./spark-2.2.0-bin-hadoop2.7 /application/
```
* set SPARK_HOME in .bashrc
```
export SPARK_HOME="/application/spark-2.2.0-bin-hadoop2.7"
```
* configure host-file
```
# 127.0.0.1 app04
192.168.2.9 app04
```
* configure $SPARK_HOME/conf/spark-default.conf
```
spark.master                     spark://app04:7077
spark.eventLog.enabled           true
spark.eventLog.dir               /data/spark-logs
spark.local.dir                  /data/tmp
```
* change user priviledge of /data/spark-logs and /data/tmp
* configure $SPARK_HOME/conf/slaves
```
app04
```
* make dir for history server
```
mkdir /tmp/spark-events
```
* change $SPARK_HOME/conf/log4j.properties, redirect spark log to file
```
log4j.rootCategory=INFO, file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{yy/MM/dd HH:mm:ss} %p %c{1}: %m%n
log4j.appender.file.File=/home/gcbi/spark-driver.log
log4j.appender.file.MaxFileSize=10MB
log4j.appender.file.MaxBackupIndex=10
```
* start master, workers and history server
```
$SPARK_HOME/sbin/start-master.sh -h app04 -p 7077
export SPARK_SSH_OPTS="-p 58422"; $SPARK_HOME/sbin/start-slaves.sh

$SPARK_HOME/sbin/start-history-server.sh
```
* make dir /home/gcbi/SimilarPubmed/src/main/cpp /home/gcbi/SimilarPubmed/jars

### Executable files and sorce files
* deploy jars and cpp files
```
scp /home/shawn/git/PubmedWordGame/SimilarPubmed/target/scala-2.11/similarpubmed_2.11-1.0.jar app04:/home/gcbi/SimilarPubmed/jars/
scp /home/shawn/git/PubmedWordGame/SimilarPubmed/target/scala-2.11/SimilarPubmed-assembly-1.0-deps.jar app04:/home/gcbi/SimilarPubmed/jars/
scp /home/shawn/git/PubmedWordGame/SimilarPubmed/src/main/cpp/* app04:/home/gcbi/SimilarPubmed/src/main/cpp
```

## Generate base/calc mat
1. generate base
```
cd src/main/python

./run.py base \
  ./data/raw_abs_test.txt \
  ./data/test_term_ids.txt \
  ./data/test_base_mat.txt

```
2. generate calc
```
./run.py calc \
  ./data/raw_abs_test.txt \
  ./data/test_term_ids.txt \
  ./data/test_calc_mat.txt
```
